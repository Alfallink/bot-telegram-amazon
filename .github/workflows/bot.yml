name: Bot Shopee - Loja Ponto H

# Configuração de Gatilhos
on:
  # Executa diariamente às 09:00 UTC
  schedule:
    - cron: '0 9 * * *'
  # Permite executar manualmente pela aba "Actions"
  workflow_dispatch:

jobs:
  run-bot:
    runs-on: ubuntu-latest  # Define o sistema operacional da máquina virtual

    steps:
      # Passo 1: Obter o código do repositório
      - name: Checkout código
        uses: actions/checkout@v4

      # Passo 2: Configurar Python
      - name: Configurar Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'  # Especifique uma versão compatível com seu código

      # Passo 3: Instalar Dependências
      - name: Instalar dependências
        run: |
          python -m pip install --upgrade pip
          pip install requests  # Adicione outras bibliotecas se necessário

      # Passo 4: Executar o Bot
      - name: Executar script do bot
        env:  # Passa os segredos como variáveis de ambiente
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
          SHOPEE_AFILIADO_BASE: ${{ secrets.SHOPEE_AFILIADO_BASE }}
        run: python bot_shopee.py
